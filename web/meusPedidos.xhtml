<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Meus Pedidos</title>       
        <link href="css/style.css" rel="stylesheet"/>
        <link href="css/materialize.css" rel="stylesheet"/>
        <link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
        <link href="css/materialize.min.css" rel="stylesheet"/>
        <link rel="stylesheet" type="text/css" href="css/box.css"/>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"/>

    </h:head>

    <h:body>

        <ui:decorate template="/template/layout.xhtml">
            <ui:define name="content">    
                <div class="container100"> 
                    <div class="wrap-login100" style=" padding: 17px 30px 33px 30px">
                        <h:form id="formTabelaa">
                            <h5 align="center"> Meus Pedidos </h5>
                            <br/>
                            <br/>
                            <div class="row" style="width: 820px">
                                <div class="col s12">
                                    <ul class="tabs">
                                        <li class="tab col s3"><a href="#aguardando">Aguardando Confirmação</a></li>
                                        <li class="tab col s3"><a href="#aceitos">Aceitos</a></li>
                                        <li class="tab col s3"><a href="#andamento">Em Andamento</a></li>
                                        <li class="tab col s3"><a href="#devolvidos">Devolvidos</a></li>
                                    </ul>
                                    <div class="linhaTab col s12" style="margin-bottom: 1px"></div>
                                </div>  
                                <div id="aguardando" class="col s12">
                                    <table class="table-fillPedidos highlight" 
                                           value="#{locacaoControle.listaPedidosAguardando}"
                                           var="al" style="margin-left: 0px">
                                        <tbody class="table-hover">

                                        <ui:repeat id="tabelaAguarda"
                                                   value="#{locacaoControle.listaPedidosAguardando}"
                                                   var="al">
                                            <tr>
                                                <td style="width: 15%"><img style=" width: 100%" src="#{al.objeto.imagem}" class="center-block"  alt="IMG"/></td>

                                                <td class="text-left" style="width: 30%; padding-left: 10px">#{al.objeto.nome} 

                                                    <br/> <br/> 
                                            <p:outputLabel class="grey-text text-darken-4 center-align" style="font-size: smaller" value="#{al.objeto.msg}"><img src="images/estrelinha.png" style="width: 12px; margin-left: 5px; margin-top: 2px"/></p:outputLabel> 
                                            <br/> <br/> 
                                            De <p:outputLabel class="green-text" value="#{al.dataInicial}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>  até 
                                            <p:outputLabel class="red-text" value="#{al.dataFinal}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td class="center" style="width: 20%">
                                            <p:outputLabel class="center" style="font-size: 19px; color: black">R$</p:outputLabel> <p:outputLabel class="center" style="font-size: 19px; color: black; margin-left: 2px" value="#{al.preco}" > 
                                                <f:convertNumber pattern="#0.00"/></p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td style="width: 15%">
                                            <h:commandLink action="#{locacaoControle.infoPedido(al)}" style="margin-left: 25%" type="button" class="btnBoot btnBoot-outline-warning"><i class="material-icons center-block">info_outline</i></h:commandLink>
                                            <p:commandLink action="#{locacaoControle.preparaModal(al)}" class="btnBoot btnBoot-outline-danger" style="margin-left: 25%; margin-top: 16px" oncomplete="PF('cancel').show()">
                                                <f:setPropertyActionListener target="#{locacaoControle.locacao}"
                                                                             value="#{al}" />
                                                <i class="material-icons center-block">cancel</i>
                                            </p:commandLink>                                       
                                            </td>                            
                                            </tr>
                                        </ui:repeat>

                                        </tbody>
                                    </table></div>
                                <div id="aceitos" class="col s12">
                                    <table class="table-fillPedidos highlight" 
                                           value="#{locacaoControle.listaPedidosAceitos}"
                                           var="al" style="margin-left: 0px">
                                        <tbody class="table-hover">

                                        <ui:repeat id="tabelaAceitos"
                                                   value="#{locacaoControle.listaPedidosAceitos}"
                                                   var="al">
                                            <tr>
                                                <td style="width: 15%"><img style=" width: 100%" src="#{al.objeto.imagem}" class="center-block"  alt="IMG"/></td>

                                                <td class="text-left" style="width: 30%; padding-left: 10px">#{al.objeto.nome} 

                                                    <br/> <br/> 
                                            <p:outputLabel class="grey-text text-darken-4 center-align" style="font-size: smaller" value="#{al.objeto.msg}" ><img src="images/estrelinha.png" style="width: 12px; margin-left: 5px; margin-top: 2px"/></p:outputLabel>   <br/> <br/> 
                                            De <p:outputLabel class="green-text" value="#{al.dataInicial}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>  até 
                                            <p:outputLabel class="red-text" value="#{al.dataFinal}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td class="center" style="width: 20%">
                                            <p:outputLabel class="center" style="font-size: 19px; color: black">R$</p:outputLabel> <p:outputLabel class="center" style="font-size: 19px; color: black; margin-left: 2px" value="#{al.preco}" > 
                                                <f:convertNumber pattern="#0.00"/></p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td style="width: 15%">
                                            <h:commandLink action="#{locacaoControle.infoPedido(al)}" style="margin-left: 25%" type="button" class="btnBoot btnBoot-outline-warning"><i class="material-icons center-block">info_outline</i></h:commandLink>                                          
                                            <p:commandLink action="#{locacaoControle.preparaModal(al)}" class="btnBoot btnBoot-outline-green" style="margin-left: 25%; margin-top: 16px" oncomplete="PF('chegou').show()">
                                                <f:setPropertyActionListener target="#{locacaoControle.locacao}"
                                                                             value="#{al}" />
                                                <i class="material-icons center-block">exit_to_app</i>
                                            </p:commandLink> 
                                            </td>                            
                                            </tr>
                                        </ui:repeat>

                                        </tbody>
                                    </table></div>
                                <div id="andamento" class="col s12">
                                    <table class="table-fillPedidos highlight" 
                                           value="#{locacaoControle.listaPedidosEmAndamento}"
                                           var="al" style="margin-left: 0px">
                                        <tbody class="table-hover">

                                        <ui:repeat id="tabelaEmAndamento"
                                                   value="#{locacaoControle.listaPedidosEmAndamento}"
                                                   var="al">
                                            <tr>
                                                <td style="width: 15%"><img style=" width: 100%" src="#{al.objeto.imagem}" class="center-block"  alt="IMG"/></td>

                                                <td class="text-left" style="width: 30%; padding-left: 10px">#{al.objeto.nome} 

                                                    <br/> <br/> 
                                            <p:outputLabel class="grey-text text-darken-4 center-align" style="font-size: smaller" value="#{al.objeto.msg}"><img src="images/estrelinha.png" style="width: 12px; margin-left: 5px; margin-top: 2px"/></p:outputLabel>    <br/> <br/> 
                                            De <p:outputLabel class="green-text" value="#{al.dataInicial}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>  até 
                                            <p:outputLabel class="red-text" value="#{al.dataFinal}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td class="center" style="width: 20%">
                                            <p:outputLabel class="center" style="font-size: 19px; color: black">R$</p:outputLabel> <p:outputLabel class="center" style="font-size: 19px; color: black; margin-left: 2px" value="#{al.preco}" > 
                                                <f:convertNumber pattern="#0.00"/></p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td style="width: 15%">
                                            <h:commandLink action="#{locacaoControle.infoPedido(al)}" style="margin-left: 25%" type="button" class="btnBoot btnBoot-outline-warning"><i class="material-icons center-block">info_outline</i></h:commandLink>           
                                            </td>                            
                                            </tr>
                                        </ui:repeat>

                                        </tbody>
                                    </table></div>
                                <div id="devolvidos" class="col s12">
                                    <table class="table-fillPedidos highlight" 
                                           value="#{locacaoControle.listaPedidosDevolvidos}"
                                           var="al" style="margin-left: 0px">
                                        <tbody class="table-hover">

                                        <ui:repeat id="tabelaDevolvidos"
                                                   value="#{locacaoControle.listaPedidosDevolvidos}"
                                                   var="al">
                                            <tr>
                                                <td style="width: 15%"><img style=" width: 100%" src="#{al.objeto.imagem}" class="center-block"  alt="IMG"/></td>

                                                <td class="text-left" style="width: 30%; padding-left: 10px">#{al.objeto.nome} 

                                                    <br/> <br/> 
                                            <p:outputLabel class="grey-text text-darken-4 center-align" style="font-size: smaller" value="#{al.objeto.msg}" ><img src="images/estrelinha.png" style="width: 12px; margin-left: 5px; margin-top: 2px"/></p:outputLabel>    <br/> <br/> 
                                            De <p:outputLabel class="green-text" value="#{al.dataInicial}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>  até 
                                            <p:outputLabel class="red-text" value="#{al.dataFinal}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td class="center" style="width: 20%">
                                            <p:outputLabel class="center" style="font-size: 19px; color: black">R$</p:outputLabel> <p:outputLabel class="center" style="font-size: 19px; color: black; margin-left: 2px" value="#{al.preco}" > 
                                                <f:convertNumber pattern="#0.00"/></p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td style="width: 15%">
                                            <h:commandLink action="#{locacaoControle.infoPedido(al)}" style="margin-left: 25%" type="button" class="btnBoot btnBoot-outline-warning"><i class="material-icons center-block">info_outline</i></h:commandLink>
                                            <p:commandLink action="#{locacaoControle.preparaModal(al)}" class="btnBoot btnBoot-outline-info" style="margin-left: 25%; margin-top: 16px" oncomplete="PF('opiniao').show()">
                                                <f:setPropertyActionListener target="#{locacaoControle.locacao}"
                                                                             value="#{al}" />
                                                <i class="material-icons center-block">sentiment_neutral</i>
                                            </p:commandLink>

                                            </td>                            
                                            </tr>
                                        </ui:repeat>

                                        </tbody>
                                    </table></div>    
                            </div>

                            <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
                            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

                            <script>
                                $(document).ready(function () {
                                    $('.tabs').tabs();
                                });
                            </script>
                            <br/>
                            <br/>
                            <br/>
                            <br/> 
                            <br/>
                            <br/> 
                            <div class="row" style="width: 820px">
                                <div class="col s12">
                                    <ul class="tabs">
                                        <li class="tab col s3"><a style="color: #ff0000" href="#recusados">Recusados</a></li>
                                    </ul>
                                    <div class="linhaTab col s12" style="margin-bottom: 1px"></div>
                                </div>  
                                <div id="recusados" class="col s12">
                                    <table class="table-fillPedidos" 
                                           value="#{locacaoControle.listaPedidosRejeitados}"
                                           var="al" style="margin-left: 0px">
                                        <tbody class="table-hover">

                                        <ui:repeat id="tabelaRejeitada"
                                                   value="#{locacaoControle.listaPedidosRejeitados}"
                                                   var="al">
                                            <tr>
                                                <td style="width: 15%"><img style=" width: 100%" src="#{al.objeto.imagem}" class="center-block"  alt="IMG"/></td>

                                                <td class="text-left" style="width: 30%; padding-left: 10px">#{al.objeto.nome} 

                                                    <br/> <br/> 
                                            <p:outputLabel class="grey-text text-darken-4 center-align" style="font-size: smaller" value="#{al.objeto.msg}"><img src="images/estrelinha.png" style="width: 12px; margin-left: 5px; margin-top: 2px"/></p:outputLabel>    <br/> <br/> 
                                            De <p:outputLabel class="green-text" value="#{al.dataInicial}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>  até 
                                            <p:outputLabel class="red-text" value="#{al.dataFinal}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td class="center" style="width: 20%">
                                            <p:outputLabel class="center" style="font-size: 19px; color: black">R$</p:outputLabel> <p:outputLabel class="center" style="font-size: 19px; color: black; margin-left: 2px" value="#{al.preco}" > 
                                                <f:convertNumber pattern="#0.00"/></p:outputLabel>
                                            </td>
                                            <td style="width: 1%">
                                                <div class="dividerVertical"></div>
                                            </td>
                                            <td style="width: 15%">
                                            <h:commandLink action="#{locacaoControle.infoPedido(al)}" style="margin-left: 25%" type="button" class="btnBoot btnBoot-outline-warning"><i class="material-icons center-block">info_outline</i></h:commandLink>
                                            </td>                            
                                            </tr>
                                        </ui:repeat>

                                        </tbody>
                                    </table></div> 
                            </div>
                            <br/>
                            <br/>
                        </h:form>
                    </div>
                </div>
            </ui:define>
        </ui:decorate>
        <p:confirmDialog class="modal" header="Opinião sobre a locação"
                         widgetVar="opiniao" severity="" width="700">

            <h:form id="formPainel" enctype="multipart/form=data"> 
                <div class="modal-content" style="margin-top: -73px; width: 700px; height: 600px; margin-left: -7px">
                    <p:rating value="#{locacaoControle.locacao.classificacaoItem}"/>
                    <label>Avalie o objeto</label>
                    <br/>
                    <h:inputTextarea value="#{locacaoControle.locacao.opiniaoItem}" />
                    <label>Descreva a sua avaliação sobre o objeto</label>
                    <br/>
                    <p:rating value="#{locacaoControle.locacao.classificacaoLocatario}"/>
                    <label>Avalie o locatário</label>
                    <br/>
                    <h:inputTextarea value="#{locacaoControle.locacao.opiniaoLocatario}" />
                    <label>Descreva a sua avaliação sobre o locatário</label>
                    <br/><br/>
                    <h:commandButton style="width: 20%" class="btn btn--radius-2 btn--blue" value="Salvar" type="submit" action="#{locacaoControle.salvarOpiniaoLocador()}"/>
                </div>
            </h:form>
        </p:confirmDialog>

        <p:confirmDialog class="modal" header="Confirmar cancelamento?" message="Realmente deseja cancelar o pedido?"
                         widgetVar="cancel" severity="alert" width="350" height="30px" style="max-height: 175px">
            <h:form id="formPainelCancel" enctype="multipart/form=data" > 
                <span>
                    <h:commandLink onclick="PF('cancel').hide()" style="margin-left: 20%; width: 20%; margin-top: 5px "     
                                   action="#{locacaoControle.cancelarPedido()}" type="button" class="btnBoot btnBoot-outline-green">Sim</h:commandLink>
                    <h:commandLink style="margin-left: 20%; width: 20%; margin-top: 5px" type="button" class="btnBoot btnBoot-outline-danger" onclick="PF('cancel').hide()">Não</h:commandLink>
                </span>
            </h:form>
        </p:confirmDialog>

        <p:confirmDialog class="modal" header="Confirmar recebimento" message="Você recebeu o objeto?"
                         widgetVar="chegou" severity="alert" width="350" height="30px" style="max-height: 175px">
            <h:form id="formPainelChegada" enctype="multipart/form=data" > 
                <span>
                    <h:commandLink onclick="PF('chegou').hide()" style="margin-left: 20%; width: 20%; margin-top: 5px "     
                                   action="#{locacaoControle.pedidoRecebido()}" type="button" class="btnBoot btnBoot-outline-green">Sim</h:commandLink>
                    <h:commandLink style="margin-left: 20%; width: 20%; margin-top: 5px" type="button" class="btnBoot btnBoot-outline-danger" onclick="PF('chegou').hide()">Não</h:commandLink>
                </span>
            </h:form>
        </p:confirmDialog>
    </h:body>
</html>
